<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Resumen de pruebas</title>
  <style>
    :root {
      --bg: #0f172a;
      --panel: #111827;
      --accent: #22d3ee;
      --text: #e2e8f0;
      --muted: #94a3b8;
      --border: #1f2937;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      padding: 24px;
      font-family: "Segoe UI", "Helvetica Neue", Arial, sans-serif;
      background: radial-gradient(120% 120% at 15% 20%, rgba(34, 211, 238, 0.08), transparent),
                  radial-gradient(140% 140% at 80% 10%, rgba(59, 130, 246, 0.08), transparent),
                  var(--bg);
      color: var(--text);
      line-height: 1.6;
    }
    h1 {
      margin: 0 0 8px;
      font-size: 28px;
      letter-spacing: -0.5px;
    }
    p.lead { margin: 0 0 20px; color: var(--muted); }
    .badge {
      display: inline-block;
      padding: 4px 10px;
      margin-right: 8px;
      border-radius: 999px;
      font-size: 12px;
      letter-spacing: 0.3px;
      color: #0f172a;
      background: var(--accent);
      font-weight: 700;
    }
    section { margin-top: 24px; }
    .card {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 16px 18px;
      box-shadow: 0 16px 36px rgba(0, 0, 0, 0.35);
      margin-bottom: 20px;
    }
    .card h2 {
      margin: 0 0 8px;
      font-size: 18px;
      letter-spacing: -0.2px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 6px;
    }
    th, td {
      padding: 10px 12px;
      vertical-align: top;
      border-top: 1px solid var(--border);
      color: var(--text);
    }
    th { text-align: left; color: var(--muted); font-weight: 600; }
    tr.group th {
      border-top: none;
      padding-top: 18px;
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.8px;
      color: var(--accent);
    }
    ul { margin: 6px 0 0; padding-left: 18px; color: var(--muted); }
    code { background: #0b1224; padding: 2px 6px; border-radius: 6px; }
  </style>
</head>
<body>
  <header>
    <span class="badge">Unitarias</span>
    <span class="badge">Integracion</span>
    <span class="badge">UI Robolectric + Compose</span>
    <h1>Resumen de pruebas</h1>
    <p class="lead">
      Las pruebas cubren validaciones de dominio, casos de uso, view models, integraciones ligeras y pantallas Compose en JVM.
      No hay suites end-to-end ni instrumentadas; los repositorios usan dobles (mocks/fakes) salvo donde se indica.
    </p>
  </header>

  <section class="card">
    <h2>Pruebas unitarias</h2>
    <table>
      <tr><th>Archivo</th><th>Casos clave</th></tr>
      <tr>
        <td><code>feature/auth/signup/domain/model/vo/SignUpValueObjectsTest.kt</code></td>
        <td>
          <ul>
            <li>Normaliza email (trim/lower) y rechaza formatos invalidos.</li>
            <li>Password exige largo minimo y mezcla de letras/digitos.</li>
            <li>Username valida longitud y caracteres permitidos.</li>
            <li>Nombre y apellido no pueden ser vacios ni excederse.</li>
          </ul>
        </td>
      </tr>
      <tr>
        <td><code>feature/auth/login/domain/usecases/LoginUseCaseTest.kt</code></td>
        <td>
          <ul>
            <li>Credencial vacia/solo espacios falla sin invocar repo.</li>
            <li>Exito y errores se propagan desde el repositorio.</li>
          </ul>
        </td>
      </tr>
      <tr>
        <td><code>feature/map/domain/usecases/SearchParkingsUseCaseTest.kt</code></td>
        <td>
          <ul>
            <li>Consulta vacia retorna todos los parqueos.</li>
            <li>Filtra por nombre o direccion sin importar mayusculas.</li>
          </ul>
        </td>
      </tr>
      <tr>
        <td><code>feature/map/domain/usecases/CalculateRouteUseCaseTest.kt</code></td>
        <td>
          <ul>
            <li>Calcula distancia &gt; 0 y conserva destino.</li>
            <li>Estima tiempo cercano a 30 km/h.</li>
          </ul>
        </td>
      </tr>
      <tr>
        <td><code>feature/reservation/domain/ReservationUseCasesTest.kt</code></td>
        <td>
          <ul>
            <li>Confirmacion de reserva delega y retorna exito.</li>
            <li>Detalle de reserva devuelve datos esperados.</li>
            <li>Observa reservas activas del usuario.</li>
          </ul>
        </td>
      </tr>
      <tr>
        <td><code>feature/profile/domain/ProfileUseCasesTest.kt</code></td>
        <td>
          <ul>
            <li>Cambio de password delega en repo.</li>
            <li>Actualizar usuario delega y devuelve exito.</li>
          </ul>
        </td>
      </tr>
      <tr>
        <td><code>feature/maintenance/data/MaintenanceDataStoreTest.kt</code></td>
        <td>Guarda y lee la bandera de mantenimiento en DataStore.</td>
      </tr>
      <tr>
        <td><code>feature/maintenance/data/MaintenanceRepositoryTest.kt</code></td>
        <td>
          <ul>
            <li>fetchMaintenanceStatus guarda en DataStore tras RemoteConfig.</li>
            <li>Observa estado desde DataStore.</li>
            <li>Si falla RemoteConfig cae a valor guardado.</li>
          </ul>
        </td>
      </tr>
      <tr>
        <td><code>feature/map/data/ParkingRepositoryImplTest.kt</code></td>
        <td>
          <ul>
            <li>Mapea DTO a modelo de dominio.</li>
            <li>Retorna failure si parking no existe.</li>
          </ul>
        </td>
      </tr>
      <tr>
        <td><code>feature/profile/data/ProfileRepositoryImplTest.kt</code></td>
        <td>
          <ul>
            <li>updateUser delega en datasource Firebase.</li>
            <li>changePassword retorna failure ante excepcion.</li>
          </ul>
        </td>
      </tr>
      <tr>
        <td><code>feature/auth/login/presentation/LoginViewModelTest.kt</code></td>
        <td>
          <ul>
            <li>Password invalida produce ValidationError.</li>
            <li>Exito actualiza estado con usuario.</li>
            <li>Error de repo pasa a estado Error.</li>
          </ul>
        </td>
      </tr>
      <tr>
        <td><code>feature/auth/signup/presentation/SignUpViewModelTest.kt</code></td>
        <td>
          <ul>
            <li>Email invalido dispara ValidationError.</li>
            <li>Password debil valida y detiene flujo.</li>
            <li>Signup exitoso emite Success.</li>
          </ul>
        </td>
      </tr>
      <tr>
        <td><code>feature/map/presentation/MapViewModelTest.kt</code></td>
        <td>
          <ul>
            <li>Carga parqueos al iniciar y muestra mapa.</li>
            <li>Con origen confirmado devuelve ruta al seleccionar parking.</li>
            <li>Busqueda cambia a estado Searching con resultados.</li>
            <li>Seleccionar sin origen produce Error.</li>
          </ul>
        </td>
      </tr>
      <tr>
        <td><code>feature/maintenance/presentation/MaintenanceViewModelTest.kt</code></td>
        <td>
          <ul>
            <li>Observa estado de mantenimiento desde repo.</li>
            <li>Refresh invoca repo y actualiza estado.</li>
          </ul>
        </td>
      </tr>
      <tr>
        <td><code>feature/reservation/presentation/ReservationViewModelTest.kt</code></td>
        <td>
          <ul>
            <li>Carga detalle y lo coloca en estado.</li>
            <li>Sin cupos muestra validacion y mensaje.</li>
            <li>Hora de salida menor marca error y costo cero.</li>
            <li>Errores de carga exponen mensaje.</li>
            <li>Recalcula costo al cambiar hora de entrada.</li>
          </ul>
        </td>
      </tr>
      <tr>
        <td><code>feature/profile/presentation/ChangePasswordViewModelTest.kt</code></td>
        <td>
          <ul>
            <li>Passwords que no coinciden o cortas generan error inmediato.</li>
            <li>Exito y fallo actualizan estado (Success/Error).</li>
          </ul>
        </td>
      </tr>
      <tr>
        <td><code>feature/profile/presentation/ProfileViewModelTest.kt</code></td>
        <td>
          <ul>
            <li>loadUserById carga y deja Idle.</li>
            <li>Fallo de carga produce Error.</li>
            <li>saveChanges emite Success o Error segun repo.</li>
          </ul>
        </td>
      </tr>
      <tr>
        <td><code>ExampleUnitTest.kt</code></td>
        <td>Suma basica 2+2=4 (plantilla).</td>
      </tr>
    </table>
  </section>

  <section class="card">
    <h2>Pruebas de integracion</h2>
    <table>
      <tr><th>Archivo</th><th>Casos clave</th></tr>
      <tr>
        <td><code>integration/MaintenanceIntegrationTest.kt</code></td>
        <td>
          <ul>
            <li>Usa MaintenanceRepository real con DataStore real y RemoteConfig simulado.</li>
            <li>refreshMaintenanceStatus propaga el valor del remote config al datastore y al estado del ViewModel.</li>
          </ul>
        </td>
      </tr>
      <tr>
        <td><code>integration/MapFlowIntegrationTest.kt</code></td>
        <td>
          <ul>
            <li>Integra GetParkingLocationsUseCase, SearchParkingsUseCase y CalculateRouteUseCase en MapViewModel.</li>
            <li>Flujo completo: carga inicial, confirma origen, filtra por nombre y selecciona parking generando ruta con distancia/tiempo.</li>
          </ul>
        </td>
      </tr>
    </table>
  </section>

  <section class="card">
    <h2>Pruebas de UI (Compose + Robolectric)</h2>
    <table>
      <tr><th>Archivo</th><th>Casos clave</th></tr>
      <tr>
        <td><code>feature/auth/ui/AuthScreensUiTest.kt</code></td>
        <td>
          <ul>
            <li>Login muestra error por password corta y navega en exito.</li>
            <li>SignUp muestra error de email invalido y renderiza inputs.</li>
            <li>Login renderiza inputs y boton.</li>
          </ul>
        </td>
      </tr>
      <tr>
        <td><code>feature/reservation/ui/ReservationScreenUiTest.kt</code></td>
        <td>
          <ul>
            <li>Pantalla de reserva muestra detalle (nombre de parqueo).</li>
            <li>Sin cupos sigue renderizando y expone estado en UI.</li>
          </ul>
        </td>
      </tr>
    </table>
  </section>

  <section class="card">
    <h2>Infraestructura de pruebas</h2>
    <table>
      <tr><th>Archivo</th><th>Rol</th></tr>
      <tr>
        <td><code>MainDispatcherRule.kt</code></td>
        <td>Configura Dispatchers.Main con dispatcher de prueba para coroutines.</td>
      </tr>
      <tr>
        <td><code>app/src/test/AndroidManifest.xml</code></td>
        <td>Declara ComponentActivity y configuracion de Robolectric.</td>
      </tr>
    </table>
  </section>
</body>
</html>
